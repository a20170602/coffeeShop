(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e5972aa"],{8457:function(t,s,e){"use strict";var a=e("fee4"),o=e.n(a);o.a},e8ea:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"settlement"},[e("van-nav-bar",{attrs:{title:"提交订单","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"main"},[e("div",{staticClass:"choice-address"},[e("van-cell",{attrs:{title:t.selectAddress,"is-link":""},on:{click:function(s){t.showAddress=!0}}})],1),e("div",{staticClass:"order"},[t._l(t.goodsData,(function(s,a){return e("div",{key:a,staticClass:"order-item"},[e("div",{staticClass:"img",style:{backgroundImage:"url("+s.small_img+")"}}),e("div",{staticClass:"content"},[e("p",{staticClass:"title"},[t._v(t._s(s.name))]),e("p",{staticClass:"rule"},[t._v(t._s(s.rule))])]),e("div",{staticClass:"count"},[t._v("x"+t._s(s.count))]),e("div",{staticClass:"price"},[t._v("￥"+t._s(s.price*s.count))])])})),e("van-coupon-cell",{staticClass:"juan",attrs:{coupons:t.coupons,"chosen-coupon":t.chosenCoupon},on:{click:function(s){t.showList=!0}}}),e("div",{staticClass:"order-total"},[t._v(" 总"+t._s(t.total)+"件商品 合计: "),e("span",{staticClass:"price"},[t._v("￥"+t._s(t.totalPrice))])])],2)]),e("van-popup",{staticStyle:{height:"90%","padding-top":"4px"},attrs:{round:"",position:"bottom"},model:{value:t.showList,callback:function(s){t.showList=s},expression:"showList"}},[e("van-coupon-list",{attrs:{coupons:t.coupons,"chosen-coupon":t.chosenCoupon},on:{change:t.onChange,exchange:t.onExchange}})],1),e("van-popup",{staticClass:"address",staticStyle:{height:"90%","padding-top":"4px"},attrs:{round:"",position:"bottom"},model:{value:t.showAddress,callback:function(s){t.showAddress=s},expression:"showAddress"}},[0==t.list.length?e("div",{staticClass:"no-address"},[t._v("暂无地址")]):t._e(),e("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{"click-item":t.selectAdd,add:t.onAdd,edit:t.onEdit},model:{value:t.chosenAddressId,callback:function(s){t.chosenAddressId=s},expression:"chosenAddressId"}})],1),e("div",{staticClass:"foot"},[e("div",{staticClass:"submit"},[e("div",[t._v(" 应付: "),e("span",{staticClass:"price"},[t._v("￥"+t._s(t.totalPrice))])]),e("van-button",{staticClass:"btn",attrs:{type:"default"},on:{click:t.toPost}},[t._v("结算")])],1)])],1)},o=[],n=(e("af82"),e("c354"),e("9a14"),e("c451")),i=e("8876"),d=e("8e17"),c=e("4ec3"),r={available:1,condition:"无使用门槛\n最多优惠12元",reason:"",value:150,name:"优惠券名称",startAt:1489104e3,endAt:1514592e3,valueDesc:"1.5",unitDesc:"元"},l={data:function(){return{showAddress:!1,showList:!1,chosenCoupon:-1,coupons:[r],chosenAddressId:"0"}},created:function(){var t=this;this.$store.commit("settlementModule/emptyData");var s=d["a"].getCookies(this);d["a"].showLoading(this),c["a"].findAddress({tokenString:s}).then((function(s){if(2e4==s.data.code){t.$toast(s.data.msg);var e=s.data.result;e.forEach((function(s){s.address=s.province+s.city+s.county+s.addressDetail,s.isDefault&&(t.chosenAddressId=s.id,t.$store.commit("settlementModule/changeData",{key:"selectAddress",value:s.address}),t.$store.commit("settlementModule/changeData",{key:"orderInfo",value:{phone:s.tel,address:s.address,receiver:s.name}}))})),t.$store.commit("settlementModule/changeData",{key:"list",value:e})}}));var e=this.$route.query.sids;c["a"].commitShopcart({tokenString:s,sids:e}).then((function(s){if(5e4==s.data.code){t.$toast(s.data.msg);var e=s.data.result;t.$store.commit("settlementModule/changeData",{key:"goodsData",value:e})}}))},computed:Object(n["a"])({},Object(i["b"])("settlementModule",["total","totalPrice"]),{},Object(i["d"])("settlementModule",["list","selectAddress","goodsData","orderInfo"])),methods:{onChange:function(t){this.showList=!1,this.chosenCoupon=t},onExchange:function(t){this.coupons.push(r)},onClickLeft:function(){this.$router.go(-1)},selectAdd:function(t){this.$store.commit("settlementModule/changeData",{key:"selectAddress",value:t.address}),this.$store.commit("settlementModule/changeData",{key:"orderInfo",value:{phone:t.tel,address:t.address,receiver:t.name}}),this.showAddress=!this.showAddress},onAdd:function(){this.$router.push({name:"Editaddress"})},onEdit:function(t){this.$router.push({name:"Editaddress",params:{aid:t.aid}})},toPost:function(){var t=this;if("选择收货地址"!=this.selectAddress){var s=d["a"].getCookies(this),e=this.$route.query.sids;d["a"].showLoading(this),c["a"].pay(Object(n["a"])({tokenString:s,sids:e},this.orderInfo)).then((function(s){6e4==s.data.code&&(t.$toast(s.data.msg),t.$router.push({name:"Post"}))}))}else this.$toast("请先选择收货地址！")}}},u=l,h=(e("8457"),e("e90a")),p=Object(h["a"])(u,a,o,!1,null,"5fa9e942",null);s["default"]=p.exports},fee4:function(t,s,e){}}]);
//# sourceMappingURL=chunk-0e5972aa.399fd8f0.js.map
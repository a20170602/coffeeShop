{"version":3,"sources":["webpack:///./src/views/Detail.vue?90da","webpack:///./src/views/Detail.vue?f994","webpack:///src/views/Detail.vue","webpack:///./src/views/Detail.vue?2cfb","webpack:///./src/views/Detail.vue","webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.array.join.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","directives","name","rawName","value","productDetail","expression","arg","style","backgroundImage","large_img","_v","_s","enname","left","class","show","$event","changeShow","isLove","loveToggle","delOne","domProps","target","composing","$set","addOne","_l","item","index","key","title","v","i","isAct","changeAct","relus","text","totalPrice","badge","toShopCar","addShopCar","staticRenderFns","computed","created","$store","commit","res","data","code","count","isLogin","methods","$router","go","tokenString","$toast","j","rule","push","join","component","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","Object","STRICT_METHOD","proto","forced","separator","call","undefined"],"mappings":"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","file":"js/chunk-5fe15e96.31de96fa.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=d136a17e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=d136a17e&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('van-nav-bar',{attrs:{\"left-text\":\"返回\",\"left-arrow\":\"\",\"border\":false},on:{\"click-left\":_vm.onClickLeft}}),_c('div',{directives:[{name:\"lazy\",rawName:\"v-lazy:background-image\",value:(_vm.productDetail.large_img),expression:\"productDetail.large_img\",arg:\"background-image\"}],staticClass:\"large-pic\",style:({backgroundImage:'url(' + _vm.productDetail.large_img + ')'})},[_c('div',{staticClass:\"banner-title\"},[_c('p',[_vm._v(_vm._s(_vm.productDetail.name))]),_c('p',[_vm._v(_vm._s(_vm.productDetail.enname))])])]),_c('div',{staticClass:\"choice\"},[_c('div',{staticClass:\"choice-box\"},[_c('div',{staticClass:\"circle\",style:({left:_vm.left + 'px'})}),_c('div',{class:{'act':!_vm.show},on:{\"click\":function($event){return _vm.changeShow(0,$event)}}},[_vm._v(\"定制\")]),_c('div',{class:{'act': _vm.show},on:{\"click\":function($event){return _vm.changeShow(1,$event)}}},[_vm._v(\"详情\")])]),_c('div',{staticClass:\"love iconfont\",class:[{'icon-xinaixin1': !_vm.isLove},{'icon-xinaixin': _vm.isLove}],on:{\"click\":_vm.loveToggle}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.show),expression:\"!show\"}]},[_c('div',{staticClass:\"num\"},[_c('div',[_vm._v(\"数量\")]),_c('div',{staticClass:\"stepper\"},[_c('div',{staticClass:\"stepper-dec iconfont icon-jian\",on:{\"click\":function($event){return _vm.delOne()}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.productDetail.count),expression:\"productDetail.count\"}],staticClass:\"stepper-main\",attrs:{\"type\":\"text\",\"readonly\":\"\"},domProps:{\"value\":(_vm.productDetail.count)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.productDetail, \"count\", $event.target.value)}}}),_c('div',{staticClass:\"stepper-add iconfont icon-jia\",on:{\"click\":function($event){return _vm.addOne()}}})])]),_vm._l((_vm.showData),function(item,index){return _c('div',{key:index,staticClass:\"box\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"mid-box\"},_vm._l((item.relus),function(v,i){return _c('div',{key:i,staticClass:\"item-box\"},[_c('div',{class:{'active':v.isAct},on:{\"click\":function($event){return _vm.changeAct(item.relus,v,i)}}},[_vm._v(_vm._s(v.text))])])}),0)])})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}]},[_c('div',{staticClass:\"content\"},_vm._l((_vm.contentDetail),function(item,index){return _c('p',{key:index},[_vm._v(_vm._s(item))])}),0)]),_c('van-goods-action',[_c('div',{staticClass:\"tatal\"},[_vm._v(\"￥\"+_vm._s(_vm.totalPrice))]),_c('van-goods-action-icon',{attrs:{\"icon\":\"cart-o\",\"badge\":_vm.badge == 0 ? '' : _vm.badge > 99 ? '99+': _vm.badge,\"text\":\"购物车\"},on:{\"click\":_vm.toShopCar}}),_c('van-goods-action-button',{attrs:{\"color\":\"#c98b59\",\"type\":\"warning\",\"text\":\"加入购物车\"},on:{\"click\":function($event){return _vm.addShopCar(0)}}}),_c('van-goods-action-button',{attrs:{\"color\":\"#7f5839\",\"type\":\"danger\",\"text\":\"立即购买\"},on:{\"click\":function($event){return _vm.addShopCar(1)}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 商品详情页 -->\r\n  <div class=\"detail\">\r\n    <van-nav-bar left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" :border=\"false\" />\r\n    <div\r\n      class=\"large-pic\"\r\n      v-lazy:background-image=\"productDetail.large_img\"\r\n      :style=\"{backgroundImage:'url(' + productDetail.large_img + ')'}\"\r\n    >\r\n      <div class=\"banner-title\">\r\n        <p>{{productDetail.name}}</p>\r\n        <p>{{productDetail.enname}}</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"choice\">\r\n      <div class=\"choice-box\">\r\n        <div :style=\"{left:left + 'px'}\" class=\"circle\"></div>\r\n        <div @click=\"changeShow(0,$event)\" :class=\"{'act':!show}\">定制</div>\r\n        <div @click=\"changeShow(1,$event)\" :class=\"{'act': show}\">详情</div>\r\n      </div>\r\n      <div\r\n        @click=\"loveToggle\"\r\n        :class=\"[{'icon-xinaixin1': !isLove},{'icon-xinaixin': isLove}]\"\r\n        class=\"love iconfont\"\r\n      ></div>\r\n    </div>\r\n    <div v-show=\"!show\">\r\n      <div class=\"num\">\r\n        <div>数量</div>\r\n        <div class=\"stepper\">\r\n          <div @click=\"delOne()\" class=\"stepper-dec iconfont icon-jian\"></div>\r\n          <input class=\"stepper-main\" type=\"text\" v-model=\"productDetail.count\" readonly />\r\n          <div @click=\"addOne()\" class=\"stepper-add iconfont icon-jia\"></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"box\" v-for=\"(item,index) in showData\" :key=\"index\">\r\n        <div class=\"title\">{{item.title}}</div>\r\n        <div class=\"mid-box\">\r\n          <div class=\"item-box\" v-for=\"(v,i) in item.relus\" :key=\"i\">\r\n            <div @click=\"changeAct(item.relus,v,i)\" :class=\"{'active':v.isAct}\">{{v.text}}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-show=\"show\">\r\n      <div class=\"content\">\r\n        <p v-for=\"(item,index) in contentDetail\" :key=\"index\">{{item}}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <van-goods-action>\r\n      <div class=\"tatal\">￥{{totalPrice}}</div>\r\n      <van-goods-action-icon\r\n        icon=\"cart-o\"\r\n        :badge=\"badge == 0 ? '' : badge > 99 ? '99+': badge\"\r\n        text=\"购物车\"\r\n        @click=\"toShopCar\"\r\n      />\r\n      <van-goods-action-button @click=\"addShopCar(0)\" color=\"#c98b59\" type=\"warning\" text=\"加入购物车\" />\r\n      <van-goods-action-button @click=\"addShopCar(1)\" color=\"#7f5839\" type=\"danger\" text=\"立即购买\" />\r\n    </van-goods-action>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Api from \"../api/api\";\r\nimport Utils from \"../util/utils\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  computed: {\r\n    // 拿到登录状态\r\n    ...mapState([\"isLogin\"]),\r\n    ...mapState(\"detailModule\", [\r\n      \"productDetail\",\r\n      \"showData\",\r\n      \"show\",\r\n      \"left\",\r\n      \"contentDetail\",\r\n      \"totalPrice\",\r\n      \"isLove\",\r\n      \"badge\"\r\n    ])\r\n  },\r\n  created() {\r\n    // 先清空一下\r\n    this.$store.commit(\"detailModule/clearDetail\");\r\n\r\n    let pid = this.$route.params.pid;\r\n    //根据pid请求商品数据\r\n    Api.getProductDetail({ pid }).then(res => {\r\n      if (res.data.code == 600) {\r\n        let data = res.data.result[0];\r\n        // 加上一个数目字段\r\n        data.count = 1;\r\n        // 请求成功\r\n        this.$store.commit(\"detailModule/getProductData\", { data });\r\n      }\r\n    });\r\n\r\n    // 拦截一下\r\n    if (!this.isLogin) {\r\n      // 没有登录的不用查询了\r\n      return;\r\n    }\r\n\r\n    //根据pid查询收藏商品接口\r\n    let tokenString = Utils.getCookies(this);\r\n\r\n    Api.findlike({ pid, tokenString }).then(res => {\r\n      if (res.data.code == 1000) {\r\n        // 查询成功\r\n        let list = res.data.result;\r\n        this.$store.commit(\"detailModule/isLoveInit\", { list });\r\n      }\r\n    });\r\n\r\n    // 请求购物车商品条目\r\n    Api.shopcartRows({ tokenString }).then(res => {\r\n      if (res.data.code === 8000) {\r\n        let data = res.data.result;\r\n        this.$store.commit(\"detailModule/changeBadge\", { data });\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    changeAct(relus, item, index) {\r\n      if (item.isAct) {\r\n        // 当前是激活的话，返回\r\n        return;\r\n      }\r\n\r\n      for (let i = 0; i < relus.length; i++) {\r\n        relus[i].isAct = false;\r\n      }\r\n      relus[index].isAct = true;\r\n    },\r\n    changeShow(index, event) {\r\n      if (this.show == index) {\r\n        return;\r\n      }\r\n\r\n      // 获取元素宽度\r\n      let left = event.target.offsetWidth * index;\r\n\r\n      // 改变这个show\r\n      this.$store.commit(\"detailModule/changeShow\", { index, left });\r\n    },\r\n    addOne() {\r\n      this.$store.commit(\"detailModule/addOne\");\r\n    },\r\n    delOne() {\r\n      this.$store.commit(\"detailModule/delOne\");\r\n    },\r\n    loveToggle() {\r\n      // 登录拦截\r\n      if (!this.isLogin) {\r\n        this.$toast(\"您还没有登录\");\r\n        return;\r\n      }\r\n\r\n      // 获取cookies验证其是否已经登录\r\n      let tokenString = Utils.getCookies(this);\r\n\r\n      if (!this.isLove) {\r\n        // 发起收藏\r\n        Api.like({\r\n          ...this.productDetail,\r\n          tokenString\r\n        }).then(res => {\r\n          if (res.data.code == 800) {\r\n            this.$toast(res.data.msg);\r\n            this.$store.commit(\"detailModule/loveToggle\");\r\n          }\r\n        });\r\n      } else {\r\n        Api.notlike({\r\n          ...this.productDetail,\r\n          tokenString\r\n        }).then(res => {\r\n          if (res.data.code == 900) {\r\n            this.$toast(res.data.msg);\r\n            this.$store.commit(\"detailModule/loveToggle\");\r\n          }\r\n        });\r\n      }\r\n    },\r\n    addShopCar(type) {\r\n      // 拦截一下\r\n      if (!this.isLogin) {\r\n        this.$toast(\"您还没有登录\");\r\n        return;\r\n      }\r\n\r\n      let rule = [];\r\n\r\n      for (let i = 0; i < this.showData.length; i++) {\r\n        let relus = this.showData[i].relus;\r\n        for (let j = 0; j < relus.length; j++) {\r\n          if (relus[j].isAct) {\r\n            rule.push(relus[j].text);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      // 参数构造好了\r\n      rule = rule.join(\"/\");\r\n\r\n      // pid: 商品pid,\r\n      // count: 商品数量,\r\n      // rule: 商品规格, 商品rule格式为: 无糖/默认奶油\r\n      // tokenString: token字符串\r\n      let tokenString = Utils.getCookies(this);\r\n\r\n      // 添加购物车\r\n      Api.addShopcart({ ...this.productDetail, rule, tokenString }).then(\r\n        res => {\r\n          // 添加购物车返回结果\r\n          if (res.data.code == 3000) {\r\n            // 提示成功信息\r\n            this.$toast(res.data.msg);\r\n\r\n            // 改变badge\r\n            if (res.data.status == 1) {\r\n              let data = this.badge + 1;\r\n\r\n              this.$store.commit(\"detailModule/changeBadge\", { data });\r\n            }\r\n\r\n            if (type == 1) {\r\n              // 立即购买多了一个跳转\r\n              let sids = JSON.stringify([res.data.sid]);\r\n              // 跳转结算页面\r\n              this.$router.push({ name: \"Settlement\", query: { sids } });\r\n            }\r\n          }\r\n        }\r\n      );\r\n    },\r\n    toShopCar() {\r\n      if (!this.isLogin) {\r\n        this.$toast(\"您还没有登录\");\r\n        return;\r\n      }\r\n      // 跳转购物车\r\n      this.$router.push({ name: \"ShopCar\" });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/scss/util.scss\";\r\n.detail {\r\n  font-size: 18px;\r\n}\r\n/deep/ .van-nav-bar {\r\n  background-color: transparent;\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 46px;\r\n  top: 0;\r\n  left: 0;\r\n  .van-icon-arrow-left {\r\n    color: #fff;\r\n  }\r\n  .van-nav-bar__text {\r\n    color: #fff;\r\n  }\r\n}\r\n.large-pic {\r\n  height: 230px;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center center;\r\n  position: relative;\r\n  .banner-title {\r\n    left: 0;\r\n    bottom: 0;\r\n    position: absolute;\r\n    width: 100%;\r\n    padding: 10px;\r\n    color: #f1f1f1;\r\n    p {\r\n      text-shadow: 0 0 5px #999;\r\n      font-size: 23px;\r\n      height: 30px;\r\n      line-height: 30px;\r\n    }\r\n  }\r\n}\r\n\r\n.choice {\r\n  height: 30px;\r\n  line-height: 30px;\r\n  padding: 5px 10px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  text-align: center;\r\n  .choice-box {\r\n    position: relative;\r\n    border: 1px solid #eee;\r\n    border-radius: 20px;\r\n    display: flex;\r\n    div {\r\n      flex-shrink: 0;\r\n      width: 60px;\r\n      border-radius: 20px;\r\n      font-size: 16px;\r\n      font-weight: 400;\r\n      position: relative;\r\n    }\r\n    .act {\r\n      color: #fff;\r\n    }\r\n    .circle {\r\n      position: absolute;\r\n      width: 60px;\r\n      height: 28px;\r\n      left: 0;\r\n      top: 0;\r\n      transition: left 0.2s ease;\r\n      border-radius: 20px;\r\n      background-color: #7f5839;\r\n    }\r\n  }\r\n  .love {\r\n    color: #7f5839;\r\n    font-size: 20px;\r\n    width: 40px;\r\n    height: 30px;\r\n    line-height: 30px;\r\n  }\r\n}\r\n.num {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 40px;\r\n  padding: 5px 20px;\r\n  div {\r\n    font-weight: 600;\r\n  }\r\n}\r\n.box {\r\n  .title {\r\n    padding: 10px 20px;\r\n    font-weight: 600;\r\n  }\r\n  .mid-box {\r\n    display: flex;\r\n    width: calc(100% - 50px);\r\n    padding: 5px 20px;\r\n    align-items: center;\r\n    .item-box {\r\n      text-align: center;\r\n      div {\r\n        margin-left: 20px;\r\n        padding: 0 10px;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        border: 1px solid #7f5839;\r\n        border-radius: 10px;\r\n      }\r\n      .active {\r\n        color: #fff;\r\n        background-color: #7f5839;\r\n      }\r\n    }\r\n  }\r\n}\r\n.tatal {\r\n  @include ellipseOne();\r\n  width: 80px;\r\n  height: 50px;\r\n  padding: 5px;\r\n  line-height: 50px;\r\n  color: #f95151;\r\n}\r\n.content {\r\n  margin: 20px;\r\n  padding: 10px;\r\n  border: 1px #eee solid;\r\n  border-radius: 20px;\r\n  p {\r\n    line-height: 30px;\r\n  }\r\n}\r\n\r\n.stepper {\r\n  width: 90px;\r\n  display: flex;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  justify-content: center;\r\n  .stepper-dec,\r\n  .stepper-add {\r\n    text-align: center;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    width: 30px;\r\n    color: #7f5839;\r\n    font-size: 22px;\r\n  }\r\n\r\n  .stepper-main {\r\n    text-align: center;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    width: 30px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=d136a17e&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=d136a17e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d136a17e\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n"],"sourceRoot":""}
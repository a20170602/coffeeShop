(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06b8b450"],{"12ed":function(t,e,a){"use strict";var s=a("81cf"),i=a.n(s);i.a},"37d3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"post"},[a("van-nav-bar",{attrs:{title:"订单","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),a("div",{staticClass:"post-list border-bottom"},[a("i",{staticClass:"line"}),a("div",{staticClass:"post-item",class:{act:0==t.active}},[a("span",{on:{click:function(e){return t.changePost(0,e)}}},[t._v("全部订单")])]),a("div",{staticClass:"post-item",class:{act:1==t.active}},[a("span",{on:{click:function(e){return t.changePost(1,e)}}},[t._v("待收货")])]),a("div",{staticClass:"post-item",class:{act:2==t.active}},[a("span",{on:{click:function(e){return t.changePost(2,e)}}},[t._v("已收货")])])]),a("div",{staticClass:"post-main"},[t._l(t.orderList,(function(e,s){return a("div",{key:s,staticClass:"main-item"},[a("div",{staticClass:"post-head"},[a("div",[t._v(t._s(t._f("formatOid")(e.oid)))]),a("div",{staticClass:"state"},[1==e.status?a("van-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.receive(e,s)}}},[t._v("确认收货")]):t._e(),2==e.status?a("van-icon",{staticClass:"icon-delete",attrs:{name:"delete"},on:{click:function(a){return t.removeOrder(e,s)}}}):t._e()],1)]),a("div",{staticClass:"post-body"},t._l(e.result,(function(e,s){return a("div",{key:s,staticClass:"post-item"},[a("div",{staticClass:"img",style:{backgroundImage:"url("+e.smallImg+")"}}),a("div",{staticClass:"title"},[a("div",{staticClass:"top"},[t._v(t._s(e.name))]),a("div",{staticClass:"rule"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"count"},[t._v("x"+t._s(e.count))]),a("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))])])})),0),a("div",{staticClass:"post-foot"},[a("div",[t._v(t._s(t._f("formatDate")(e.orderTime)))]),a("div",[a("span",[t._v("共"+t._s(e.result.length)+"件商品")]),a("span",{staticClass:"price"},[t._v("￥"+t._s(e.totalPrice))])])])])})),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length == 0"}],staticClass:"tag"},[t._v("没有订单")])],2)],1)},i=[],o=(a("af82"),a("a677"),a("3c4a"),a("9a14"),a("c451")),n=a("4ec3"),r=a("8e17"),c=a("8876"),d={data:function(){return{active:0}},created:function(){var t=this,e=r["a"].getCookies(this);r["a"].showLoading(this),n["a"].findOrder({tokenString:e,status:0}).then((function(e){if(7e4==e.data.code){t.$toast(e.data.msg);var a=e.data.result,s=[],i=[];a.forEach((function(t){i.includes(t.oid)||i.push(t.oid)})),i.forEach((function(t){var e={};e.oid=t,e.result=[],e.totalPrice=0,a.forEach((function(a){a.oid==t&&(e.status=a.status,e.orderTime=new Date(a.createdAt),e.result.push(a),e.totalPrice+=100*a.count*a.price/100)})),e.totalPrice=e.totalPrice.toFixed(2),s.push(e)})),s.sort((function(t,e){return new Date(e.orderTime)-new Date(t.orderTime)})),t.changeData({key:"orderList",value:s})}}))},mounted:function(){var t=document.querySelector(".line"),e=document.querySelector(".post-list span");t.style.width=e.offsetWidth+"px",t.style.left=e.offsetLeft+"px"},computed:Object(o["a"])({},Object(c["d"])("postModule",["orderList"])),methods:Object(o["a"])({},Object(c["c"])("postModule",["changeData","deleteItem"]),{onClickLeft:function(){this.$router.go(-1)},changePost:function(t,e){var a=this;if(this.active!=t){var s=document.querySelector(".line");s.style.width=e.target.offsetWidth+"px",s.style.left=e.target.offsetLeft+"px",this.active=t;var i=r["a"].getCookies(this);r["a"].showLoading(this),n["a"].findOrder({tokenString:i,status:t}).then((function(t){if(7e4==t.data.code){a.$toast(t.data.msg);var e=t.data.result,s=[],i=[];e.forEach((function(t){i.includes(t.oid)||i.push(t.oid)})),i.forEach((function(t){var a={};a.oid=t,a.result=[],a.totalPrice=0,e.forEach((function(e){e.oid==t&&(a.status=e.status,a.result.push(e),a.orderTime=new Date(e.createdAt),a.totalPrice+=100*e.count*e.price/100)})),a.totalPrice=a.totalPrice.toFixed(2),s.push(a)})),s.sort((function(t,e){return new Date(e.orderTime)-new Date(t.orderTime)})),a.changeData({key:"orderList",value:s})}}))}},receive:function(t,e){var a=this,s=r["a"].getCookies(this);r["a"].showLoading(this);var i=t.oid;n["a"].receive({tokenString:s,oid:i}).then((function(s){8e4==s.data.code&&(a.$toast(s.data.msg),0==a.active?(t.status=2,t.result.forEach((function(t){t.status=2}))):a.deleteItem({index:e}))}))},removeOrder:function(t,e){var a=this,s=r["a"].getCookies(this);r["a"].showLoading(this);var i=t.oid;n["a"].removeOrder({tokenString:s,oid:i}).then((function(t){9e4==t.data.code&&(a.$toast(t.data.msg),a.deleteItem({index:e}))}))}})},l=d,u=(a("12ed"),a("e90a")),f=Object(u["a"])(l,s,i,!1,null,"6b11de1a",null);e["default"]=f.exports},"81cf":function(t,e,a){},a677:function(t,e,a){"use strict";var s=a("91fe"),i=a("6be9").includes,o=a("5751"),n=a("6885"),r=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!r},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")}}]);
//# sourceMappingURL=chunk-06b8b450.b890db5d.js.map
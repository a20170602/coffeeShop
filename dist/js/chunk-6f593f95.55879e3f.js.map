{"version":3,"sources":["webpack:///./src/views/ShopCar.vue?c6e9","webpack:///src/views/ShopCar.vue","webpack:///./src/views/ShopCar.vue?7822","webpack:///./src/views/ShopCar.vue","webpack:///./src/views/ShopCar.vue?93fd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","scopedSlots","_u","key","fn","onClickRight","directives","name","rawName","value","expression","_v","isEdit","_e","proxy","staticStyle","shopData","length","finished","onLoad","model","callback","$$v","loading","_l","item","index","select","$set","small_img","_s","enname","rule","domProps","sumPrice","$event","changePrice","totalPrice","onSubmit","checkAll","selectAll","checkedAll","staticRenderFns","data","ready","created","isLogin","$store","commit","res","code","shopcarData","forEach","v","checked","computed","mounted","setTimeout","watch","deep","handler","i","total","Math","round","methods","$router","go","price","count","toFixed","sids","push","sid","$toast","JSON","stringify","component"],"mappings":"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","file":"js/chunk-6f593f95.55879e3f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shopcar\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [(_vm.isLogin)?_c('div',{on:{\"click\":_vm.onClickRight}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}]},[_vm._v(\"完成\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit),expression:\"!isEdit\"}]},[_vm._v(\"管理\")])]):_vm._e()]},proxy:true}])}),(_vm.isLogin)?_c('div',{staticStyle:{\"height\":\"100%\"}},[(_vm.shopData.length == 0)?[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ready),expression:\"ready\"}],staticClass:\"tig\"},[_vm._v(\"购物车没有商品\")])]:[_c('div',{staticClass:\"shops-list\"},[_c('van-list',{attrs:{\"immediate-check\":false,\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.shopData),function(item,index){return _c('div',{key:index,staticClass:\"shop-item\"},[_c('div',{staticClass:\"left\"},[_c('van-checkbox',{on:{\"change\":_vm.select},model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}})],1),_c('div',{staticClass:\"content\"},[_c('van-image',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.small_img),expression:\"item.small_img\"}],staticClass:\"shop-img\",attrs:{\"src\":item.small_img}}),_c('div',{staticClass:\"inner-content\"},[_c('div',{staticClass:\"shop-title\"},[_vm._v(\" \"+_vm._s(item.name)+\"-\"+_vm._s(item.enname)+\" \"),_c('br'),_vm._v(\" \"+_vm._s(item.rule)+\" \")]),_c('div',{staticClass:\"shop-info\"},[_c('div',{staticClass:\"shop-price\",domProps:{\"textContent\":_vm._s('￥'+item.sumPrice)}}),_c('van-stepper',{staticClass:\"stepper\",attrs:{\"disable-input\":\"\",\"input-width\":\"20px\",\"button-size\":\"20px\"},on:{\"plus\":function($event){return _vm.changePrice(item)},\"minus\":function($event){return _vm.changePrice(item)}},model:{value:(item.count),callback:function ($$v) {_vm.$set(item, \"count\", $$v)},expression:\"item.count\"}})],1)])],1)])}),0)],1),_c('div',[_vm._v(_vm._s(_vm.totalPrice))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit),expression:\"!isEdit\"}],staticClass:\"submit-bar\"},[_c('van-submit-bar',{attrs:{\"safe-area-inset-bottom\":\"\",\"price\":_vm.totalPrice,\"button-text\":\"提交订单\"},on:{\"submit\":_vm.onSubmit}},[_c('van-checkbox',{on:{\"change\":_vm.checkAll,\"click\":_vm.selectAll},model:{value:(_vm.checkedAll),callback:function ($$v) {_vm.checkedAll=$$v},expression:\"checkedAll\"}},[_vm._v(\"全选\")])],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}],staticClass:\"submit-bar\"},[_c('van-submit-bar',{attrs:{\"safe-area-inset-bottom\":\"\",\"price\":_vm.totalPrice,\"button-text\":\"删除\"},on:{\"submit\":_vm.onSubmit}},[_c('van-checkbox',{on:{\"click\":_vm.selectAll},model:{value:(_vm.checkedAll),callback:function ($$v) {_vm.checkedAll=$$v},expression:\"checkedAll\"}},[_vm._v(\"全选\")])],1)],1)]],2):_c('div',{staticClass:\"tig\"},[_vm._v(\"你还没有登录！\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 购物车页面 -->\r\n  <div class=\"shopcar\">\r\n    <van-nav-bar title=\"购物车\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\">\r\n      <template #right>\r\n        <div @click=\"onClickRight\" v-if=\"isLogin\">\r\n          <span v-show=\"isEdit\">完成</span>\r\n          <span v-show=\"!isEdit\">管理</span>\r\n        </div>\r\n      </template>\r\n    </van-nav-bar>\r\n    <div style=\"height:100%\" v-if=\"isLogin\">\r\n      <template v-if=\"shopData.length == 0\">\r\n        <div class=\"tig\" v-show=\"ready\">购物车没有商品</div>\r\n      </template>\r\n      <template v-else>\r\n        <!-- 商品列表部分 -->\r\n        <div class=\"shops-list\">\r\n          <van-list\r\n            :immediate-check=\"false\"\r\n            v-model=\"loading\"\r\n            :finished=\"finished\"\r\n            finished-text=\"没有更多了\"\r\n            @load=\"onLoad\"\r\n          >\r\n            <!-- 购物车列表部分 -->\r\n\r\n            <div class=\"shop-item\" v-for=\"(item,index) in shopData\" :key=\"index\">\r\n              <div class=\"left\">\r\n                <van-checkbox @change=\"select\" v-model=\"item.checked\"></van-checkbox>\r\n              </div>\r\n              <div class=\"content\">\r\n                <van-image class=\"shop-img\" v-lazy=\"item.small_img\" :src=\"item.small_img\" />\r\n                <div class=\"inner-content\">\r\n                  <div class=\"shop-title\">\r\n                    {{item.name}}-{{item.enname}}\r\n                    <br />\r\n                    {{item.rule}}\r\n                  </div>\r\n                  <div class=\"shop-info\">\r\n                    <div class=\"shop-price\" v-text=\"'￥'+item.sumPrice\"></div>\r\n                    <van-stepper\r\n                      disable-input\r\n                      @plus=\"changePrice(item)\"\r\n                      @minus=\"changePrice(item)\"\r\n                      class=\"stepper\"\r\n                      input-width=\"20px\"\r\n                      button-size=\"20px\"\r\n                      v-model=\"item.count\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </van-list>\r\n        </div>\r\n        <div>{{totalPrice}}</div>\r\n        <!-- 提交订单部分 -->\r\n        <div v-show=\"!isEdit\" class=\"submit-bar\">\r\n          <van-submit-bar\r\n            @submit=\"onSubmit\"\r\n            safe-area-inset-bottom\r\n            :price=\"totalPrice\"\r\n            button-text=\"提交订单\"\r\n          >\r\n            <van-checkbox @change=\"checkAll\" @click=\"selectAll\" v-model=\"checkedAll\">全选</van-checkbox>\r\n          </van-submit-bar>\r\n        </div>\r\n        <div v-show=\"isEdit\" class=\"submit-bar\">\r\n          <van-submit-bar\r\n            safe-area-inset-bottom\r\n            :price=\"totalPrice\"\r\n            button-text=\"删除\"\r\n            @submit=\"onSubmit\"\r\n          >\r\n            <van-checkbox @click=\"selectAll\" v-model=\"checkedAll\">全选</van-checkbox>\r\n          </van-submit-bar>\r\n        </div>\r\n      </template>\r\n    </div>\r\n    <div v-else class=\"tig\">你还没有登录！</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Api from \"../api/api\";\r\nimport Util from \"../util/utils\";\r\nimport { mapState } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      checkedAll: false,\r\n      loading: false,\r\n      ready: false\r\n    };\r\n  },\r\n  created() {\r\n    // 是否登录，没有登录拦截\r\n    // 拦截一下\r\n    if (!this.isLogin) {\r\n      // 没有登录的不用查询了\r\n      return;\r\n    }\r\n\r\n    // 清空数据\r\n    this.$store.commit(\"shopcarModule/empty\");\r\n\r\n    // 请求数据\r\n    Util.showLoading(this, \"请求中...\");\r\n    let tokenString = Util.getCookies(this);\r\n\r\n    Api.findAllShopcart({ tokenString }).then(res => {\r\n      if (res.data.code == 5000) {\r\n        // 需要增加一个字段\r\n        let shopcarData = res.data.result;\r\n\r\n        shopcarData.forEach(v => {\r\n          v.sumPrice = ((v.price * 100 * v.count) / 100).toFixed(2);\r\n          v.checked = false;\r\n        });\r\n\r\n        this.$store.commit(\"shopcarModule/changeData\", {\r\n          key: \"shopDataAll\",\r\n          data: shopcarData\r\n        });\r\n\r\n        // 初始加载五个\r\n        this.$store.commit(\"shopcarModule/getFiveShop\", { t: this });\r\n        Util.clearLoading(this);\r\n      }\r\n    });\r\n  },\r\n  computed: {\r\n    ...mapState([\"isLogin\"]),\r\n    ...mapState(\"shopcarModule\", [\r\n      \"shopData\",\r\n      \"isEdit\",\r\n      \"totalPrice\",\r\n      \"finished\",\r\n      \"shopDataAll\"\r\n    ])\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      this.ready = true;\r\n    }, 1000);\r\n  },\r\n  watch: {\r\n    shopData: {\r\n      deep: true,\r\n      handler() {\r\n        let total = 0;\r\n        for (let i = 0; i < this.shopData.length; i++) {\r\n          if (this.shopData[i].checked) {\r\n            total = total + Math.round(this.shopData[i].sumPrice * 100);\r\n          }\r\n        }\r\n\r\n        // 计算总价\r\n        this.$store.commit(\"shopcarModule/changeData\", {\r\n          key: \"totalPrice\",\r\n          data: total\r\n        });\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      // 返回上一个页面\r\n      this.$router.go(-1);\r\n    },\r\n    onClickRight() {\r\n      this.$store.commit(\"shopcarModule/toggleData\", { key: \"isEdit\" });\r\n    },\r\n    changePrice(v) {\r\n      // 当步进器改变时，改变对应的值\r\n\r\n      // 修改购物车商品数量接口\r\n      Util.showLoading(this, \"请求中...\");\r\n      let tokenString = Util.getCookies(this);\r\n      Api.modifyShopcartCount({ tokenString, ...v }).then(res => {\r\n        Util.clearLoading(this);\r\n        if (res.data.code == 6000) {\r\n          this.$toast(res.data.msg);\r\n          // 修改前端价格\r\n          let price = v.price * 100; //防止小数误差\r\n          price *= v.count;\r\n          v.sumPrice = (price / 100).toFixed(2);\r\n        }\r\n      });\r\n    },\r\n    selectAll() {\r\n      this.checkedAll = !this.checkedAll;\r\n      this.shopData.forEach(v => {\r\n        v.checked = this.checkedAll;\r\n      });\r\n    },\r\n    checkAll() {\r\n      if (this.shopData.length == 0) {\r\n        this.checkedAll = false;\r\n      }\r\n    },\r\n    select() {\r\n      for (let i = 0; i < this.shopData.length; i++) {\r\n        if (!this.shopData[i].checked) {\r\n          this.checkedAll = false;\r\n          return;\r\n        }\r\n      }\r\n      this.checkedAll = true;\r\n    },\r\n    onSubmit() {\r\n      // 没有数据直接return\r\n      if (this.shopData.length == 0) {\r\n        return;\r\n      }\r\n\r\n      let sids = [];\r\n      this.shopData.forEach(v => {\r\n        if (v.checked) {\r\n          sids.push(v.sid);\r\n        }\r\n      });\r\n\r\n      // 在编辑状态才删除\r\n      if (this.isEdit) {\r\n        // 先去请求删除\r\n\r\n        if (sids.length == 0) {\r\n          this.$toast(\"您还没有选择删除商品\");\r\n          return;\r\n        }\r\n        // 构造参数\r\n        sids = JSON.stringify(sids);\r\n        let tokenString = Util.getCookies(this);\r\n        Util.showLoading(this, \"删除中...\");\r\n        Api.removeShopcart({ tokenString, sids }).then(res => {\r\n          Util.clearLoading(this);\r\n          if (res.data.code == 7000) {\r\n            // 删除商品成功\r\n            this.$toast(res.data.msg);\r\n\r\n            // 前台删除\r\n            this.$store.commit(\"shopcarModule/deleteShopcart\");\r\n\r\n            // 如果没有数据了，记得清空\r\n            if (this.shopData.length == 0) {\r\n              this.checkedAll = false;\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        // 这里有问题\r\n        // 这是结算页面\r\n        if (sids.length == 0) {\r\n          this.$toast(\"您还没有选择结算商品\");\r\n          return;\r\n        }\r\n\r\n        sids = JSON.stringify(sids);\r\n\r\n        // 携带字符串过去\r\n        this.$router.push({ name: \"Settlement\", query: { sids } });\r\n      }\r\n    },\r\n    onLoad() {\r\n      // 一次加载5个\r\n      this.$store.commit(\"shopcarModule/getFiveShop\", { t: this });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/scss/util.scss\";\r\n/deep/ .van-nav-bar {\r\n  .van-icon-arrow-left {\r\n    color: #7f5839;\r\n  }\r\n  .van-nav-bar__text {\r\n    color: #7f5839;\r\n  }\r\n}\r\n.tig {\r\n  height: 500px;\r\n  line-height: 500px;\r\n  text-align: center;\r\n  font-size: 25px;\r\n}\r\n.submit-bar .van-submit-bar {\r\n  bottom: 50px;\r\n}\r\n.van-submit-bar__price {\r\n  color: #f95151;\r\n}\r\n.van-submit-bar__button--danger {\r\n  background: -webkit-linear-gradient(left, #7f5839, #7f5839);\r\n  background: linear-gradient(to right, #7f5839, #7f5839);\r\n}\r\n\r\n.shopcar {\r\n  height: 100%;\r\n}\r\n\r\n.shops-list {\r\n  height: calc(100% - 146px - 20px);\r\n  overflow-y: auto;\r\n  padding: 10px 10px;\r\n}\r\n.shop-item {\r\n  background-color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 10px;\r\n  border-radius: 10px;\r\n  box-shadow: 0px 0px 5px #e4e4e4;\r\n  .left {\r\n    width: 20px;\r\n    margin: 0 5px;\r\n    text-align: center;\r\n  }\r\n  .content {\r\n    // background-color: aquamarine;\r\n    height: 100px;\r\n    padding: 10px 0;\r\n    box-sizing: border-box;\r\n    width: calc(100% - 30px);\r\n    display: flex;\r\n    .shop-img {\r\n      width: 80px;\r\n      // background-color: #a8a8a8;\r\n    }\r\n    .inner-content {\r\n      width: calc(100% - 80px - 10px);\r\n      margin: 0 5px;\r\n      // background-color: #ddd;\r\n      .shop-title {\r\n        @include ellipseOne();\r\n        height: 50px;\r\n        line-height: 25px;\r\n        overflow: hidden;\r\n      }\r\n      .shop-info {\r\n        height: 30px;\r\n      }\r\n    }\r\n  }\r\n  &:first-child {\r\n    margin-top: 0;\r\n  }\r\n}\r\n.shop-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  .shop-price {\r\n    line-height: 30px;\r\n    color: #f95151;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n  }\r\n  .stepper {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ShopCar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ShopCar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShopCar.vue?vue&type=template&id=24357360&scoped=true&\"\nimport script from \"./ShopCar.vue?vue&type=script&lang=js&\"\nexport * from \"./ShopCar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShopCar.vue?vue&type=style&index=0&id=24357360&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24357360\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ShopCar.vue?vue&type=style&index=0&id=24357360&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./ShopCar.vue?vue&type=style&index=0&id=24357360&lang=scss&scoped=true&\""],"sourceRoot":""}
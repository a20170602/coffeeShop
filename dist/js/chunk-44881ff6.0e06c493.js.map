{"version":3,"sources":["webpack:///./src/views/Reset.vue?5474","webpack:///./src/views/Reset.vue?2df7","webpack:///src/views/Reset.vue","webpack:///./src/views/Reset.vue?7800","webpack:///./src/views/Reset.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","resetPwd","$event","resetEve","staticStyle","closeList","model","value","callback","$$v","showList","expression","info","showKeyboard","onInput","onDelete","staticRenderFns","data","oldPassword","password","hasOld","computed","methods","$router","go","msg","fn","res","code","$dialog","key","slice","length","$toast","tokenString","component"],"mappings":"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","file":"js/chunk-44881ff6.0e06c493.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=style&index=0&id=0ac20ef4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=style&index=0&id=0ac20ef4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reset\"},[_c('van-nav-bar',{attrs:{\"title\":\"设置\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('van-cell',{attrs:{\"title\":\"修改密码\",\"size\":\"large\",\"is-link\":\"\"},on:{\"click\":_vm.resetPwd}}),_c('van-cell',{attrs:{\"title\":\"退出登录\",\"size\":\"large\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.resetEve(0)}}}),_c('van-cell',{attrs:{\"title\":\"注销账号\",\"size\":\"large\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.resetEve(1)}}}),_c('van-popup',{staticStyle:{\"height\":\"90%\",\"padding-top\":\"4px\"},attrs:{\"round\":\"\",\"position\":\"bottom\"},on:{\"close\":_vm.closeList},model:{value:(_vm.showList),callback:function ($$v) {_vm.showList=$$v},expression:\"showList\"}},[_c('van-password-input',{staticStyle:{\"margin-top\":\"40px\"},attrs:{\"value\":_vm.value,\"info\":_vm.info,\"focused\":_vm.showKeyboard},on:{\"focus\":function($event){_vm.showKeyboard = true}}}),_c('van-number-keyboard',{attrs:{\"show\":_vm.showKeyboard},on:{\"input\":_vm.onInput,\"delete\":_vm.onDelete,\"blur\":function($event){_vm.showKeyboard = false}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"reset\">\r\n    <van-nav-bar title=\"设置\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n    <van-cell @click=\"resetPwd\" title=\"修改密码\" size=\"large\" is-link />\r\n    <van-cell @click=\"resetEve(0)\" title=\"退出登录\" size=\"large\" is-link />\r\n    <van-cell @click=\"resetEve(1)\" title=\"注销账号\" size=\"large\" is-link />\r\n\r\n    <van-popup\r\n      @close=\"closeList\"\r\n      v-model=\"showList\"\r\n      round\r\n      position=\"bottom\"\r\n      style=\"height: 90%; padding-top: 4px;\"\r\n    >\r\n      <van-password-input\r\n        style=\"margin-top:40px\"\r\n        :value=\"value\"\r\n        :info=\"info\"\r\n        :focused=\"showKeyboard\"\r\n        @focus=\"showKeyboard = true\"\r\n      />\r\n\r\n      <!-- 数字键盘 -->\r\n      <van-number-keyboard\r\n        :show=\"showKeyboard\"\r\n        @input=\"onInput\"\r\n        @delete=\"onDelete\"\r\n        @blur=\"showKeyboard = false\"\r\n      />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Api from \"../api/api\";\r\nimport Utils from \"../util/utils\";\r\nimport { mapMutations } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      showList: false,\r\n      value: \"\",\r\n      showKeyboard: true,\r\n      // 旧密码\r\n      oldPassword: \"\",\r\n      // 新密码\r\n      password: \"\",\r\n      // hasOld\r\n      hasOld: false\r\n    };\r\n  },\r\n  computed: {\r\n    info() {\r\n      return this.hasOld ? \"输入新密码\" : \"输入旧密码\";\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"changeLogin\"]),\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    resetEve(type) {\r\n      // 定义方法映射\r\n      const obj = {\r\n        \"0\": {\r\n          msg: \"是否退出登录\",\r\n          fn: tokenString => {\r\n            Api.logout({ tokenString }).then(res => {\r\n              if (res.data.code == \"F001\") {\r\n                // 把cookies删除吧\r\n                Utils.removeCookies(this);\r\n                this.$toast(res.data.msg);\r\n                // 修改登录状态\r\n                this.changeLogin({ bool: false });\r\n                // 跳转到登录页面\r\n                this.$router.push({ name: \"Login\" });\r\n              }\r\n            });\r\n          }\r\n        },\r\n        \"1\": {\r\n          msg: \"是否注销账号\",\r\n          fn: tokenString => {\r\n            Api.destroyAccount({ tokenString }).then(res => {\r\n              if (res.data.code == \"G001\") {\r\n                // 把cookies删除吧\r\n                Utils.removeCookies(this);\r\n                this.$toast(res.data.msg);\r\n                // 修改登录状态\r\n                this.changeLogin({ bool: false });\r\n                // 跳转到登录页面\r\n                this.$router.push({ name: \"Login\" });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      };\r\n\r\n      this.$dialog\r\n        .confirm({\r\n          title: obj[type].msg\r\n        })\r\n        .then(() => {\r\n          let tokenString = Utils.getCookies(this);\r\n          Utils.showLoading(this);\r\n          obj[type].fn(tokenString);\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    onInput(key) {\r\n      this.value = (this.value + key).slice(0, 6);\r\n\r\n      if (this.value.length == 6) {\r\n        // 当有旧密码的时候\r\n        if (this.hasOld) {\r\n          if (this.oldPassword == this.value) {\r\n            // 两次输入密码不能一样\r\n            this.$toast(\"两次输入密码不能一样\");\r\n\r\n            this.closeList();\r\n            return;\r\n          }\r\n\r\n          let tokenString = Utils.getCookies(this);\r\n          Utils.showLoading(this, \"正在修改密码\");\r\n\r\n          Api.updatePassword({\r\n            tokenString,\r\n            password: this.value,\r\n            oldPassword: this.oldPassword\r\n          }).then(res => {\r\n            if (res.data.code == \"E001\") {\r\n              Utils.removeCookies(this);\r\n              this.$toast(res.data.msg);\r\n              // 修改登录状态\r\n              this.changeLogin({ bool: false });\r\n              // 跳转到登录页面\r\n              this.$router.push({ name: \"Login\" });\r\n            }\r\n            this.$toast(res.data.msg);\r\n            this.closeList();\r\n          });\r\n        } else {\r\n          // 赋值旧密码\r\n          this.oldPassword = this.value;\r\n          this.hasOld = true;\r\n          this.value = \"\";\r\n        }\r\n      }\r\n    },\r\n    onDelete() {\r\n      this.value = this.value.slice(0, this.value.length - 1);\r\n    },\r\n    resetPwd() {\r\n      this.showList = true;\r\n      this.value = \"\";\r\n    },\r\n    closeList() {\r\n      // 在关闭列表的时候，将新旧密码重置\r\n      this.oldPassword = \"\";\r\n      this.password = \"\";\r\n      this.value = \"\";\r\n      this.hasOld = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.reset {\r\n  height: 100%;\r\n  background-color: #eee;\r\n}\r\n/deep/ .van-nav-bar {\r\n  .van-icon-arrow-left {\r\n    color: #7f5839;\r\n  }\r\n  .van-nav-bar__text {\r\n    color: #7f5839;\r\n  }\r\n}\r\n\r\n/deep/ .van-cell {\r\n  margin: 20px 0;\r\n}\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Reset.vue?vue&type=template&id=0ac20ef4&scoped=true&\"\nimport script from \"./Reset.vue?vue&type=script&lang=js&\"\nexport * from \"./Reset.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Reset.vue?vue&type=style&index=0&id=0ac20ef4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ac20ef4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
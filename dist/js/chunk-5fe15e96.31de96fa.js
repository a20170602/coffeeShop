(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fe15e96"],{6774:function(t,e,a){"use strict";var i=a("a4f4"),o=a.n(i);o.a},a4f4:function(t,e,a){},c84b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},[a("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":"",border:!1},on:{"click-left":t.onClickLeft}}),a("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.productDetail.large_img,expression:"productDetail.large_img",arg:"background-image"}],staticClass:"large-pic",style:{backgroundImage:"url("+t.productDetail.large_img+")"}},[a("div",{staticClass:"banner-title"},[a("p",[t._v(t._s(t.productDetail.name))]),a("p",[t._v(t._s(t.productDetail.enname))])])]),a("div",{staticClass:"choice"},[a("div",{staticClass:"choice-box"},[a("div",{staticClass:"circle",style:{left:t.left+"px"}}),a("div",{class:{act:!t.show},on:{click:function(e){return t.changeShow(0,e)}}},[t._v("定制")]),a("div",{class:{act:t.show},on:{click:function(e){return t.changeShow(1,e)}}},[t._v("详情")])]),a("div",{staticClass:"love iconfont",class:[{"icon-xinaixin1":!t.isLove},{"icon-xinaixin":t.isLove}],on:{click:t.loveToggle}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}]},[a("div",{staticClass:"num"},[a("div",[t._v("数量")]),a("div",{staticClass:"stepper"},[a("div",{staticClass:"stepper-dec iconfont icon-jian",on:{click:function(e){return t.delOne()}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.productDetail.count,expression:"productDetail.count"}],staticClass:"stepper-main",attrs:{type:"text",readonly:""},domProps:{value:t.productDetail.count},on:{input:function(e){e.target.composing||t.$set(t.productDetail,"count",e.target.value)}}}),a("div",{staticClass:"stepper-add iconfont icon-jia",on:{click:function(e){return t.addOne()}}})])]),t._l(t.showData,(function(e,i){return a("div",{key:i,staticClass:"box"},[a("div",{staticClass:"title"},[t._v(t._s(e.title))]),a("div",{staticClass:"mid-box"},t._l(e.relus,(function(i,o){return a("div",{key:o,staticClass:"item-box"},[a("div",{class:{active:i.isAct},on:{click:function(a){return t.changeAct(e.relus,i,o)}}},[t._v(t._s(i.text))])])})),0)])}))],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[a("div",{staticClass:"content"},t._l(t.contentDetail,(function(e,i){return a("p",{key:i},[t._v(t._s(e))])})),0)]),a("van-goods-action",[a("div",{staticClass:"tatal"},[t._v("￥"+t._s(t.totalPrice))]),a("van-goods-action-icon",{attrs:{icon:"cart-o",badge:0==t.badge?"":t.badge>99?"99+":t.badge,text:"购物车"},on:{click:t.toShopCar}}),a("van-goods-action-button",{attrs:{color:"#c98b59",type:"warning",text:"加入购物车"},on:{click:function(e){return t.addShopCar(0)}}}),a("van-goods-action-button",{attrs:{color:"#7f5839",type:"danger",text:"立即购买"},on:{click:function(e){return t.addShopCar(1)}}})],1)],1)},o=[],s=(a("e90c"),a("c451")),n=a("4ec3"),c=a("8e17"),r=a("8876"),l={computed:Object(s["a"])({},Object(r["d"])(["isLogin"]),{},Object(r["d"])("detailModule",["productDetail","showData","show","left","contentDetail","totalPrice","isLove","badge"])),created:function(){var t=this;this.$store.commit("detailModule/clearDetail");var e=this.$route.params.pid;if(n["a"].getProductDetail({pid:e}).then((function(e){if(600==e.data.code){var a=e.data.result[0];a.count=1,t.$store.commit("detailModule/getProductData",{data:a})}})),this.isLogin){var a=c["a"].getCookies(this);n["a"].findlike({pid:e,tokenString:a}).then((function(e){if(1e3==e.data.code){var a=e.data.result;t.$store.commit("detailModule/isLoveInit",{list:a})}})),n["a"].shopcartRows({tokenString:a}).then((function(e){if(8e3===e.data.code){var a=e.data.result;t.$store.commit("detailModule/changeBadge",{data:a})}}))}},methods:{onClickLeft:function(){this.$router.go(-1)},changeAct:function(t,e,a){if(!e.isAct){for(var i=0;i<t.length;i++)t[i].isAct=!1;t[a].isAct=!0}},changeShow:function(t,e){if(this.show!=t){var a=e.target.offsetWidth*t;this.$store.commit("detailModule/changeShow",{index:t,left:a})}},addOne:function(){this.$store.commit("detailModule/addOne")},delOne:function(){this.$store.commit("detailModule/delOne")},loveToggle:function(){var t=this;if(this.isLogin){var e=c["a"].getCookies(this);this.isLove?n["a"].notlike(Object(s["a"])({},this.productDetail,{tokenString:e})).then((function(e){900==e.data.code&&(t.$toast(e.data.msg),t.$store.commit("detailModule/loveToggle"))})):n["a"].like(Object(s["a"])({},this.productDetail,{tokenString:e})).then((function(e){800==e.data.code&&(t.$toast(e.data.msg),t.$store.commit("detailModule/loveToggle"))}))}else this.$toast("您还没有登录")},addShopCar:function(t){var e=this;if(this.isLogin){for(var a=[],i=0;i<this.showData.length;i++)for(var o=this.showData[i].relus,r=0;r<o.length;r++)if(o[r].isAct){a.push(o[r].text);break}a=a.join("/");var l=c["a"].getCookies(this);n["a"].addShopcart(Object(s["a"])({},this.productDetail,{rule:a,tokenString:l})).then((function(a){if(3e3==a.data.code){if(e.$toast(a.data.msg),1==a.data.status){var i=e.badge+1;e.$store.commit("detailModule/changeBadge",{data:i})}if(1==t){var o=JSON.stringify([a.data.sid]);e.$router.push({name:"Settlement",query:{sids:o}})}}}))}else this.$toast("您还没有登录")},toShopCar:function(){this.isLogin?this.$router.push({name:"ShopCar"}):this.$toast("您还没有登录")}}},d=l,u=(a("6774"),a("e90a")),v=Object(u["a"])(d,i,o,!1,null,"d136a17e",null);e["default"]=v.exports},e90c:function(t,e,a){"use strict";var i=a("91fe"),o=a("fee7"),s=a("8c47"),n=a("fb11"),c=[].join,r=o!=Object,l=n("join",",");i({target:"Array",proto:!0,forced:r||!l},{join:function(t){return c.call(s(this),void 0===t?",":t)}})}}]);
//# sourceMappingURL=chunk-5fe15e96.31de96fa.js.map